{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Map from \"@babel/runtime-corejs2/core-js/map\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/runner/Chatter-React/pages/Components/Messages.tsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport styles from './../Style/Components/Messages.module.css';\nimport { firestore } from './../Scripts/Firebase';\nimport Message from './Message';\n\nvar Messages = /*#__PURE__*/function (_React$Component) {\n  _inherits(Messages, _React$Component);\n\n  function Messages(props) {\n    var _this;\n\n    _classCallCheck(this, Messages);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Messages).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      Messages: new _Map()\n    });\n\n    console.log(\"Servers/\".concat(_this.props.SID, \"/Messages\"));\n    firestore.collection(\"Servers/\".concat(_this.props.SID, \"/Messages\")).limit(7).orderBy('Created', 'desc').onSnapshot(function _callee(Server) {\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              Server.docChanges().forEach(function (Msg) {\n                if (Msg.type != 'removed') {\n                  var Data = Msg.doc.data();\n                  if (!Data.Created) return;\n                  Msgs.push({\n                    Time: Data.Created.toMillis(),\n                    Msg: __jsx(Message, {\n                      key: Msg.doc.id,\n                      Self: \"mHvcak8OjqZglBlENhQSLqBOgPB3\",\n                      Owner: Data.UID,\n                      Username: Data.Owner,\n                      Picture: Data.Picture,\n                      Content: Data.Content,\n                      __source: {\n                        fileName: _jsxFileName,\n                        lineNumber: 26\n                      },\n                      __self: this\n                    })\n                  });\n                }\n              });\n\n              _this.setState({\n                Messages: Msgs.sort(function (a, b) {\n                  return a.Time - b.Time;\n                })\n              });\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    }, function () {});\n    return _this;\n  }\n\n  _createClass(Messages, [{\n    key: \"render\",\n    value: function render() {\n      console.log(this.state.Messages);\n      return __jsx(\"section\", {\n        className: styles.Container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, this.state.Messages.map(function (e) {\n        return e.Msg;\n      }));\n    }\n  }]);\n\n  return Messages;\n}(React.Component);\n\nexport default Messages;","map":{"version":3,"sources":["/home/runner/Chatter-React/pages/Components/Messages.tsx"],"names":["React","styles","firestore","Message","Messages","props","console","log","SID","collection","limit","orderBy","onSnapshot","Server","docChanges","forEach","Msg","type","Data","doc","data","Created","Msgs","push","Time","toMillis","id","UID","Owner","Picture","Content","setState","sort","a","b","state","Container","map","e","Component"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,MAAP,MAAmB,2CAAnB;AAEA,SAASC,SAAT,QAA0B,uBAA1B;AAEA,OAAOC,OAAP,MAAoB,WAApB;;IAKMC,Q;;;AAEJ,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,kFAAMA,KAAN;;AADiB,4DADK;AAAED,MAAAA,QAAQ,EAAE;AAAZ,KACL;;AAEjBE,IAAAA,OAAO,CAACC,GAAR,mBAAuB,MAAKF,KAAL,CAAWG,GAAlC;AACAN,IAAAA,SAAS,CAACO,UAAV,mBAAgC,MAAKJ,KAAL,CAAWG,GAA3C,gBAA2DE,KAA3D,CAAiE,CAAjE,EAAoEC,OAApE,CAA4E,SAA5E,EAAuF,MAAvF,EACGC,UADH,CACc,iBAAMC,MAAN;AAAA;AAAA;AAAA;AAAA;AACVA,cAAAA,MAAM,CAACC,UAAP,GAAoBC,OAApB,CAA4B,UAACC,GAAD,EAAS;AACnC,oBAAIA,GAAG,CAACC,IAAJ,IAAY,SAAhB,EAA2B;AACzB,sBAAMC,IAAI,GAAGF,GAAG,CAACG,GAAJ,CAAQC,IAAR,EAAb;AACA,sBAAI,CAACF,IAAI,CAACG,OAAV,EAAmB;AACnBC,kBAAAA,IAAI,CAACC,IAAL,CAAU;AACRC,oBAAAA,IAAI,EAAEN,IAAI,CAACG,OAAL,CAAaI,QAAb,EADE;AAERT,oBAAAA,GAAG,EACD,MAAC,OAAD;AACE,sBAAA,GAAG,EAAEA,GAAG,CAACG,GAAJ,CAAQO,EADf;AAEE,sBAAA,IAAI,EAAC,8BAFP;AAGE,sBAAA,KAAK,EAAER,IAAI,CAACS,GAHd;AAIE,sBAAA,QAAQ,EAAET,IAAI,CAACU,KAJjB;AAKE,sBAAA,OAAO,EAAEV,IAAI,CAACW,OALhB;AAME,sBAAA,OAAO,EAAEX,IAAI,CAACY,OANhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHM,mBAAV;AAaD;AACF,eAlBD;;AAmBA,oBAAKC,QAAL,CAAc;AAAE3B,gBAAAA,QAAQ,EAAEkB,IAAI,CAACU,IAAL,CAAU,UAACC,CAAD,EAAIC,CAAJ;AAAA,yBAAUD,CAAC,CAACT,IAAF,GAAOU,CAAC,CAACV,IAAnB;AAAA,iBAAV;AAAZ,eAAd;;AApBU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADd,EAsBK,YAAM,CAAE,CAtBb;AAHiB;AA2BlB;;;;6BACQ;AACPlB,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK4B,KAAL,CAAW/B,QAAvB;AACA,aACE;AAAS,QAAA,SAAS,EAAEH,MAAM,CAACmC,SAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKD,KAAL,CAAW/B,QAAX,CAAoBiC,GAApB,CAAwB,UAAAC,CAAC;AAAA,eAAIA,CAAC,CAACtB,GAAN;AAAA,OAAzB,CADH,CADF;AAKD;;;;EArCoBhB,KAAK,CAACuC,S;;AAuC7B,eAAenC,QAAf","sourcesContent":["import React from 'react';\n\nimport styles from './../Style/Components/Messages.module.css';\n\nimport { firestore } from './../Scripts/Firebase';\n\nimport Message from './Message';\n\ntype MyProps = { SID: string };\ntype Message_Entry = { Time: number, Msg: Message };\ntype MyState = { Messages: Map<string, Message> };\nclass Messages extends React.Component<MyProps, MyState> {\n  public state: MyState = { Messages: new Map() }\n  constructor(props) {\n    super(props);\n    console.log(`Servers/${this.props.SID}/Messages`);\n    firestore.collection(`Servers/${this.props.SID}/Messages`).limit(7).orderBy('Created', 'desc')\n      .onSnapshot(async Server => {\n        Server.docChanges().forEach((Msg) => {\n          if (Msg.type != 'removed') {\n            const Data = Msg.doc.data();\n            if (!Data.Created) return;\n            Msgs.push({\n              Time: Data.Created.toMillis(),\n              Msg: (\n                <Message \n                  key={Msg.doc.id}\n                  Self=\"mHvcak8OjqZglBlENhQSLqBOgPB3\"\n                  Owner={Data.UID}\n                  Username={Data.Owner}\n                  Picture={Data.Picture}\n                  Content={Data.Content}\n                />\n              )\n            })\n          }\n        });\n        this.setState({ Messages: Msgs.sort((a, b) => a.Time-b.Time) });\n      }, () => {}\n    )\n  }\n  render() {\n    console.log(this.state.Messages);\n    return (\n      <section className={styles.Container}>\n        {this.state.Messages.map(e => e.Msg)}\n      </section>\n    );\n  }\n}\nexport default Messages;"]},"metadata":{},"sourceType":"module"}